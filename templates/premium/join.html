{% extends 'base.html' %}
{% block content %}
<script src="https://js.stripe.com/v3/"></script>
<div class='text-center text-white pt-5 pb-4 background-premium'>
  <h1 class='fw-bold'>LinksHub Premium</h1>
  <p class='font-size-12'>Get full analytics, style your profile as you want, and much more. </p>
  <button class='btn btn-get-premium fw-bold checkout-button me-3' data-secret="{{ session_id }}">Get Premium</button>

  {% if display_free_trial %}
  <button class='btn btn-get-premium fw-bold' data-bs-toggle="modal" data-bs-target="#freeTrialModal">Active Free Trial</button>
  {% endif %}

  <p class='font-size-08 mb-0 mt-4'>Purchase premium through https://checkout.stripe.com/</p>
</div>

<div class="row mx-0">
    <!-- Summary --->
    <div class="row container m-0 mb-5">
      <div class="col-12 col-md-3 mt-5 text-center">
        <div class="d-inline-block p-3 mb-4 border rounded-circle" style="background-color: #e7e7e7;">
            <i class="fas fa-chart-line" aria-hidden="true" style="font-size: 2.5rem;color: #383838;"></i>
        </div>
        <h5 class='fw-bold'>Analytics</h5>
        <span>Get advanced traffic analytics.</span>
      </div>

      <div class="col-12 col-md-3 mt-5 text-center">
        <div class="d-inline-block p-3 mb-4 border rounded-circle" style="background-color: #e7e7e7;">
          <i class="fas fa-key" aria-hidden="true" style="font-size: 2.5rem;color: #383838;"></i>
        </div>
        <h5 class='fw-bold'>Premium Links</h5>
        <span>Restrict access to your content with password protected links.</span>
      </div>

      <div class="col-12 col-md-3 mt-5 text-center">
        <div class="d-inline-block p-3 mb-4 border rounded-circle" style="background-color: #e7e7e7;">
          <i class="fas fa-palette" aria-hidden="true" style="font-size: 2.5rem;color: #383838;"></i>
        </div>
        <h5 class='fw-bold'>Appearance</h5>
        <span>Personalize your profile.</span>
      </div>
      <div class="col-12 col-md-3 mt-5 text-center">
        <div class="d-inline-block p-3 mb-4 border rounded-circle" style="background-color: #e7e7e7;">
          <i class="fas fa-ellipsis-h" aria-hidden="true" style="font-size: 2.5rem;color: #383838;"></i>
        </div>
        <h5 class='fw-bold'>Others</h5>
        <span>Link animations etc.</span>
      </div>
    </div>

  <!-- <div class="row col-10 offset-1 col-xl-8 offset-xl-2 mt-5">
    <div class="col-12 mt-5">
      <h3 class='text-center fw-bold'>
        <img src="https://image.flaticon.com/icons/png/512/609/609997.png" class='img-fluid mb-1 me-2 title-icon-premium'>
        Analytics
      </h3>
    </div>
    <div class="row p-0 m-0 mb-5">
      <div class="col-12 col-md-6">
        <img src="https://media.discordapp.net/attachments/423928174552809473/859174929492213790/unknown.png" class='img-fluid rounded p-3'>
      </div>
      <div class="col-12 col-md-6 p-3 text-center text-md-start">
        <p>Loem irpsum dolor sit amet, consectetur adipiscing elit. Fusce sit amet dictum ipsum, sollicitudin. Fusce sit amet dictum ipsum, sollicitudin</p>
        
      </div>
    </div>

      <div class="col-12 mt-5">
        <h3 class='text-center fw-bold'>
          <img src="https://image.flaticon.com/icons/png/512/610/610005.png" class='img-fluid mb-1 me-2 title-icon-premium'>
          Premium Links
        </h3>
      </div>
      <div class="row p-0 m-0 mb-5">
        <div class="col-12 col-md-6 p-3 text-center text-md-end">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce sit amet dictum ipsum, sollicitudin</p>
          <span>Lorem ipsum</span>
        </div>
        <div class="col-12 col-md-6">
          <img src="/media/premium/premium-links.png" style='max-height: 40vh;' class='img-fluid rounded p-3'>
        </div>
      </div>

    <div class="col-12 mt-5">
      <h3 class='text-center fw-bold'>
        <img src="https://image.flaticon.com/icons/png/512/610/610090.png" class='img-fluid mb-1 me-2 title-icon-premium'>
        Appearance
      </h3>
    </div>
    <div class="row p-0 m-0 mb-5">
      <div class="col-12 col-md-6">
        <img src="https://media.discordapp.net/attachments/423928174552809473/859174929492213790/unknown.png" class='img-fluid rounded p-3'>
      </div>
      <div class="col-12 col-md-6 p-3 text-center text-md-start">
        <p>Loem irpsum dolor sit amet, consectetur adipiscing elit. Fusce sit amet dictum ipsum, sollicitudin. Fusce sit amet dictum ipsum, sollicitudin</p>
        
      </div>
    </div>

  </div>
</div> -->


<!-- Compare Two Plans -->
<div class="container mt-5">
  <h5 class="text-center fw-bold pb-2 text-gradient-mint-blue">Pick Your Plan
  </h5>
  <div class="row">

    <!-- PREMIUM PLAN -->
    <div class="col-12 col-md-6 col-lg-4 offset-lg-2">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title font-size-13 fw-bold">
            PRO $3.5
            <small class="text-muted font-size-08">/month</small>
          </h5>
          <small class='text-muted'>With supporting text below as a natural lead-in.</small>

          <ul class="list-group list-group-flush mt-3">

            <span class='fw-bold mt-3'>Analytics: </span>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Summary for last 7 days
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Summary for any date range
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Analytics for each link
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Analytics for each private link
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Analytics for each social media platform
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Basic device analytics
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Basic location analytics
            </li>    

            <span class='fw-bold mt-4'>Appearance: </span>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Background premium colors
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Background custom color
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Background image
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Custom button theme
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Button outline
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Button fill
            </li>

            <span class='fw-bold mt-4'>Other: </span>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Premium Links
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Links animations
            </li>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Hide linkshub logo from your profile page
            </li>
          </ul>
        </div>
      </div>
    </div>



    <!-- FREE PLAN -->
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title font-size-13 fw-bold">FREE</h5>
          <small class='text-muted'>With supporting text below as a natural lead-in.</small>

          <ul class="list-group list-group-flush mt-3">

            <span class='fw-bold mt-3'>Analytics: </span>
            <li class="list-group-item">
              <i class="fas fa-check text-success pe-2"></i>
              Summary for last 7 days
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Summary for any date range
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Analytics for each link
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Analytics for each private link
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Analytics for each social media platform
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Basic device analytics
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Basic location analytics
            </li>    

            <span class='fw-bold mt-4'>Appearance: </span>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Background premium colors
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Background custom color
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Background image
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Custom button theme
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Button outline
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Button fill
            </li>

            <span class='fw-bold mt-4'>Other: </span>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Premium Links
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Links animations
            </li>
            <li class="list-group-item">
              <i class="fas fa-times text-danger pe-2"></i>
              Hide linkshub logo from your profile page
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-12 col-lg-8 offset-lg-2">
      <!-- Get Premium Button -->
      <div class="d-grid gap-2 my-4">
        <button class="btn btn-success fw-bold py-2 checkout-button font-size-11" style='letter-spacing: 1px;' type="button">GET PREMIUM</button>
      </div>
    </div>
  </div>

  <!-- FAQ -->
  <div class="row mt-4 mb-5">
    <div class="col-12 col-lg-8 offset-lg-2">
      <p class='mt-3 mb-2 fw-bold font-size-15'>FAQ</p>
      <div class="accordion accordion-flush" id="accordionExample">

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed bg-light text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              How much does premium plan cost?
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              It is only $3.5 per month. You can cancel it anytime.
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed bg-light text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              What do I get in premium plan?
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              In short: You will be able to customize your profile and get many analytics features.
            </div>
          </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button class="accordion-button collapsed bg-light text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                How can I cancel my LinksHub premium?
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                Cancel your Premium plan anytime <a href="{% url 'membership' %}">here</a>.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
              <button class="accordion-button collapsed bg-light text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                Can I get a refund?
              </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                We do not offer refunds. 
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
</div>


<!-- <div class='text-center text-white py-5 px-0 mt-5 background-premium' >
  <h2 class='fw-bold'>Lorem Ipsum bla bla bla</h2>
  <p class='font-size-11'>Loem irpsum dolor sit amet, consectetur adipiscing elit. Fusce sit amet dictum ipsum.</p>
  <button class='btn btn-get-premium fw-bold checkout-button me-3' data-secret="{{ session_id }}">Get Premium</button>

  {% if display_free_trial %}
  <button class='btn btn-get-premium fw-bold' data-bs-toggle="modal" data-bs-target="#freeTrialModal">Get Free Trial</button>
  {% endif %}
</div> -->


<!-- Free Trial Modal -->
<div class="modal fade" id="freeTrialModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font-size-12 fw-bold"  style='letter-spacing: 0.5px'>LinksHub Premium</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- <img src="https://cdn.vox-cdn.com/thumbor/9zHVj4OnM5pYeO8rCX-W4aL-lw0=/0x0:4428x1993/1200x800/filters:focal(1872x1198:2580x1906)/cdn.vox-cdn.com/uploads/chorus_image/image/63371518/shutterstock_785442694.0.jpg" class='img-fluid rounded' alt=""> -->
        <p class='mt-4 mb-0'>Active free trial [tekst]</p>
      </div>
      <div class="d-grid gap-2 p-3">
        <button type="button" class="btn btn-primary" id='get_trial_btn'>Active Free Trial</button>
      </div>
    </div>
  </div>
</div>

<!-- <div class="container mt-5">
  <div class="row justify-content-center">
      <div class="col-md-4 order-md-2 mb-4">
        <h4 class="d-flex justify-content-between align-items-center mb-3">
          <span class="text-muted">Your cart</span>
          <span class="badge badge-secondary badge-pill">1</span>
        </h4>
        <ul class="list-group mb-3">
          <li class="list-group-item d-flex justify-content-between lh-condensed">
            <div>
              <h6 class="my-0">Cloud Home Lab Premium</h6>
              <small class="text-muted">{{ membership | title }}</small>
            </div>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span>Total (EUR)</span>
            <strong>${{ final_dollar }}</strong>
          </li>
        </ul>

        <div class="text-center pt-3">

          <script src="https://js.stripe.com/v3/"></script>

            <button id="checkout-button" data-secret="{{ session_id }}">
              Checkout
            </button>

         {% load static %}
          <script type="text/javascript">
            var sessionid = "{{session_id}}";
          </script>
          <script src="{% static "membership/checkout.js" %}"></script>
        </div>
        </div>
      </div>
</div> -->
<input type="hidden" id='csrftoken' value='{{ csrf_token }}'>
<script type="text/javascript">
  var sessionid = "{{session_id}}";
</script>
<!-- <script src="{% static 'membership/checkout.js' %}"></script> -->
<script>
    var stripe = Stripe('pk_test_51ImLvDFwBE1S4q2SxumrmQe1yeSHwffBbKjfUfWm7zo2XSGXXNNRXVpO0zlvfFVpG1D3nPWDCeo7Veqx4GXT6Ar400adXZls1b');

    var checkoutButtons = document.querySelectorAll('.checkout-button');

    checkoutButtons.forEach((checkoutButton) => {
      checkoutButton.addEventListener('click', function() {
        stripe.redirectToCheckout({
            // Make the id field from the Checkout Session creation API response
            // available to this file, so you can provide it as argument here
            // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
            sessionId: sessionid
        }).then(function (result) {
            // If `redirectToCheckout` fails due to a browser or network
            // error, display the localized error message to your customer
            // using `result.error.message`.
        });
        });
    })

    // Free Trial
    var csrftoken = document.getElementById('csrftoken').value
    var get_trial_btn = document.getElementById('get_trial_btn')

    get_trial_btn.addEventListener('click', (e) => {
      // Start free trial
      fetch('/premium/start_free_trial', {
          method: 'POST',
          headers: {
              'Accept': 'application/json',
              'X-CSRFToken': csrftoken,
              'X-Requested-With':'XMLHttpRequest'
          },
      }).then(res=>res.json()).then(data=>{
          console.log('data', data)
          if(data.error) {
              alert(data.error)
          } else {
              // Set free trial end date
              sessionStorage.setItem('free_trial_end_date', data.end_date)
              
              location.replace('http://127.0.0.1:8000/premium/success/free_trial')
          }
      });
    })
</script>
{% endblock %}