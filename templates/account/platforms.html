{% extends 'base.html' %}
{% load static %}
{% block title %}Social Media Platforms{% endblock %}

{% block content %}
<div class="container">
    <form action="" class='mt-3' method='POST'>
        {% csrf_token %}
        {% for platform in platforms %}
          <div class="input-group mb-2"> <!-- id="{{platform.platform}}-input-group-id" -->
              <span class="input-group-prepend" style='width: 30%'>
                <span class='input-group-text' style='width: 100%'>{{ platform.platform_url }}</span>
              </span>
              <input
              type="text"
              aria-label="First name" class="form-control platform-input"
              id="{{platform.platform}}-id"
              placeholder="Your {{ platform.platform }} username"
              name='{{ platform.platform }}'
              onkeyup="previewURL('{{platform.platform}}-id', '{{platform.platform}}-url-preview', '{{platform.platform_url}}')"
              onfocus="previewURL('{{platform.platform}}-id', '{{platform.platform}}-url-preview', '{{platform.platform_url}}')"
              onblur="clearURL('{{platform.platform}}-url-preview')" autocomplete="off"

              {% if platform.username is not None %}
                  value="{{ platform.username }}"
              {% endif %}>
          </div>

          <!-- Wyświetlanie błędu url -->
          {% if error_msg_platform == platform.platform %}
            <p style='font-size: 0.8rem' class='text-danger fw-bold'>{{ error_msg }}</p>
            <script>
              inputError("{{platform.platform}}")
            </script>
          {% endif %}


          <div class="w-100 text-center" id="{{platform.platform}}-url-preview"></div>
        {% endfor %}
        <input type="submit" value='Submit form' class='btn btn-dark'>
    </form>
</div>
<script src="{% static 'js/platforms.js' %}"></script>
{% endblock %}
